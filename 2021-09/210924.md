# 2021-09-24

# 데이터 웨어하우스와 데이터 마트

기존 방식대로 데이터 웨어하우스를 사용하는 프로세스로, 데이터 웨어하우스는 일반적인 RDB와는 달리 **대량의 데이터를 장기 보존하는**것에 최적화되어 있다. 따라서 **정리된 데이터를 한 번에 전송하는 것은 뛰어나지만, 소량의 데이터를 자주 쓰고 읽는 데는 적합하지 않다.** 

![image](https://user-images.githubusercontent.com/16011260/134676644-ba531105-6b2a-494c-b2de-2e258abf93b5.png)


데이터 소스에 보관된 Raw Data를 추출하고 필요에 따라 가공한 후 데이터 웨어하우스에 저장하기까지의 흐름이 ETL 프로세스다. 데이터 웨어하우스는 중요한 데이터 처리에 사용되기 때문에 아무때나 함부로 사용해 시스템 과부하를 초래해선 안 된다. 따라서 데이터 분석과 같은 목적으로 사용해야 하는 경우, 필요한 데이터만 추출하여 데이터 마트를 구축한다. 

# 데이터 레이크

빅데이터의 시대에는 ETL 프로세스 자체가 복잡해진다. 또한 모든 데이터가 데이터 웨어하우스를 가정하여 만들어지는 것도 아니다. 빅데이터의 시대에는 **우선 데이터가 있고, 나중에 테이블을 설계하는 것이 바람직하다.**

따라서 모든 데이터를 원래의 형태로 축적하고, 나중에 그것을 필요에 따라 가공하는 구조로 프로세스를 변경해야 한다. 여러 곳에서 데이터가 흘러들어 오는 '데이터를 축적하는 호수'에 비유해 데이터 축적 장소를 **데이터 레이크**라고 한다. 

![image](https://user-images.githubusercontent.com/16011260/134676697-feab5806-d053-4764-8829-273fe1e08866.png)

데이터 레이크는 단순한 스토리지이며, 이것만으론 데이터를 가공할 수 없다. 이를 위해 사용하는 것이 **MapReduce** 등의 분산 데이터 처리 기술이다. 

## 애드 혹 분석 및 대시보드 도구

시작 단계의 데이터 분석에선 자동화 등을 생각하지 않고 수작업으로 데이터를 집계할 수 있으면 된다. 이는 '일회성 데이터 분석'이라는 의미로 **애드 혹 분석(ad hoc analysis)**이라고 한다.

많은 경우에 애드 혹 분석에서는 데이터 마트를 만들지 않고, 데이터 레이크과 데이터 웨어하우스에 직접 연결하여 작업을 수행하는 경우가 많다. 

또한 수작업으로 데이터 분석뿐만 아니라 정기적으로 그래프와 보고서를 만들고 싶을 때도 있을 텐데, 이럴 때 많이 도입하는 것이 **대시보드 도구**이다. 

데이터 파이프라인의 큰 흐름은 변하지 않는다. 데이터를 모아서 축적하고 이를 통합하여 데이터 마트로 만들고 시각화 도구에서 접속하는 것이 큰 흐름이다. 중요한 것은 이러한 데이터의 흐름을 만드는 것이며, 그 과정에서 사용되는 기술은 교환할 수 있다. 

# 데이터를 수집하는 목적

'검색', '가공', '시각화'의 예

데이터를 모은 후에 무엇을 실시할지는 달성하고자 하는 목적에 따라 달라진다.

[이미지 TBD]

## 데이터 검색

대량의 데이터 중에서 조건에 맞는 것을 찾고 싶은 경우가 있다. 언제 무엇이 필요할지 모르기 때문에 시스템 로그, 고객의 행동 이력 등 발생하는 모든 데이터를 취득해 놓는다. 필요할 때 신속하게 검색할 수 있어야 하므로, 시스템에는 실시간 데이터 처리나 검색 엔진을 이용하여 키워드를 찾는 기능이 필요하다.

## 데이터 가공

업무 시스템의 일부로서 데이터 처리 결과를 이용하고 싶은 경우가 있다. 웹 사이트에서 추천 상품을 제안하거나 센서 데이터의 비정상적인 상태를 감지하여 통보하는 경우다. 목적이 명확하기 때문에 필요한 데이터를 계획적으로 모아서 데이터 파이프라인을 설계한다.

데이터 가공에는 자동화가 피수적이다. 따라서 워크플로 관리를 도입하여 반복적으로 테스팅을 수행해 시스템을 구축한다.

## 데이터 시각화

데이터를 시각적으로 봄으로써 알고 싶은 정보를 얻을 수 있다. 통계 분석 소프트웨어 또는 BI 도구 등으로 그래프를 만들고 거기에서 앞으로의 상황을 예측, 분석하여 의사 결정에 도움이 되도록 한다.