# 2021-08-04

과제를 좀 더 정교하게 다듬었다. 에러 처리 등을 좀 더 보수적으로 해야하는데, 미비한 부분이 있어 피드백을 받게 되면 추가로 반영해볼 계획이다. 문서화 작업도 얼추 윤곽이 잡혀가고 있다.

## 오늘 수행한 작업

- 2번 과제를 업데이트 했다. 스크립트에서 중도에 에러가 발생하는 경우 더 진행하지 않고 중단하도록 했다. 다만, 이전 상태로 롤백하는 것까지는 구현하지 못했다.
- Helm 차트도 업데이트 했다. 불필요한 파일을 제거하고, helm으로 배포했을 때 바로 테스트할 수 있도록 명령어를 출력하도록 설정했다.
- 기초적인 문서화 작업은 마무리 했다. 핸들러와 각 서버 모듈에 대해선 문서화를 완료했는데, 내일 사수님과 이야기 해보면서 추가해야할 내용을 정리하기로 했다.

## 새롭게 깨달은 점

- 리다이렉션 관련해서 한 번에 정리가 된 내용을 찾았다.

    ```bash
    m> file sh 출력 파일디스크립터 m을 file로 리다이렉트
    m>> file sh 출력파일디스크립터 m을 file로 append
    m< file sh 입력파일디스크립터 m을 file로 부터 리다이렉트
    <&m sh 파일 디스크립터 m으로부터 표준 입력을 가로챔
    <&- sh 표준 입력을 닫는다.
    >&m sh 파일디스크립터 m을 표준 출력으로 사용한다.
    >&- sh 표준 출력을 닫는다.
    m<&n sh 입력파일디스크립터 n을 파일디스크립터 m에 연결한다
    m<&- sh 입력 파일디스크립터 m을 닫는다
    n>&m sh 출력파일디스크립터 n을 파일디스크립터 m에 닫는다.
    m>&- sh 출력파일디스크립터 m을 닫는다.
    ```

- 스크립트 진행 중에 실패하는 경우 종료하도록 하는 방법을 찾았다.

    ```bash
    if [ $? = 1 ]; then
      echo "FAILED"
      exit
    else
      echo "SUCCESS"
    fi
    ```

## 새롭게 궁금한 점

- 쉘 스크립트에서의 롤백은 어떤 식으로 구조화하는 것이 좋을까?

## 여담

내일 과제를 살펴보시고 미팅 일정을 잡으시겠다고 하셨다. 좋은 결과가 있었으면 좋겠다!